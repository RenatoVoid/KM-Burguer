<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KM BURGER | Card√°pio Digital</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #09090b; color: #f4f4f5; } /* Fundo Preto */
        .scroll-hide::-webkit-scrollbar { display: none; }
        /* Header com efeito de vidro escuro */
        .glass-header { background: rgba(9, 9, 11, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid #27272a; }
        /* Cart√µes escuros */
        .card-item { background-color: #18181b; border: 1px solid #27272a; transition: all 0.2s; }
        .card-item:active { transform: scale(0.98); background-color: #27272a; }
        /* Bot√µes Vermelhos */
        .btn-red { background-color: #dc2626; color: white; }
        .btn-red:active { background-color: #b91c1c; }
        .text-price { color: #ef4444; } /* Pre√ßo em Vermelho */
    </style>
</head>
<body class="pb-32 selection:bg-red-500 selection:text-white">

    <header class="glass-header fixed top-0 w-full z-50 shadow-lg">
        <div class="max-w-md mx-auto px-5 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-black italic tracking-tighter text-white">KM <span class="text-red-600">BURGER</span> üçî</h1>
                <p class="text-[10px] text-zinc-400 font-semibold tracking-widest uppercase">O Sabor Aut√™ntico</p>
            </div>
            <div class="flex items-center gap-2 bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20">
                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                <span class="text-xs font-bold text-green-500">Aberto</span>
            </div>
        </div>

        <nav id="nav-cats" class="max-w-md mx-auto flex gap-3 overflow-x-auto px-5 pb-4 pt-2 scroll-hide whitespace-nowrap text-sm font-bold text-zinc-400">
            </nav>
    </header>

    <div class="h-40"></div>

    <main id="menu-container" class="max-w-md mx-auto px-4 space-y-8"></main>

    <div class="fixed bottom-6 left-4 right-4 z-40 max-w-md mx-auto">
        <button onclick="abrirCheckout()" class="w-full bg-red-600 text-white p-2 rounded-2xl shadow-2xl shadow-red-900/30 flex items-center justify-between pr-6 pl-2 active:scale-95 transition-all border border-red-500">
            <div class="bg-white text-red-600 w-12 h-12 rounded-xl flex items-center justify-center font-black text-lg shadow-sm transition-transform" id="cart-count">0</div>
            <div class="flex flex-col items-end">
                <span class="text-[10px] text-red-100 font-bold uppercase tracking-widest opacity-80">Ver meu pedido</span>
                <span id="cart-total" class="text-xl font-black">R$ 0,00</span>
            </div>
        </button>
    </div>

    <div id="modal-acai" class="hidden fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50 backdrop-blur-sm">
        <div class="bg-zinc-900 w-full max-w-sm rounded-3xl p-6 border border-zinc-800 shadow-2xl h-[80vh] flex flex-col">
            <div class="flex justify-between items-center mb-4">
                <h2 id="acai-titulo" class="text-xl font-black text-white">Monte seu A√ßa√≠</h2>
                <button onclick="fecharModalAcai()" class="text-zinc-500 hover:text-white">‚úï</button>
            </div>
            <p class="text-xs text-zinc-400 mb-4 uppercase tracking-widest">Escolha os adicionais:</p>
            <div id="lista-adicionais" class="flex-1 overflow-y-auto space-y-2 pr-2 scroll-hide">
                </div>
            <div class="mt-4 pt-4 border-t border-zinc-800">
                <div class="flex justify-between items-center mb-4 text-lg font-bold text-white">
                    <span>Total:</span><span id="acai-total-modal" class="text-red-500 font-black">R$ 0,00</span>
                </div>
                <button onclick="confirmarAcai()" class="w-full btn-red font-bold py-4 rounded-xl shadow-lg active:scale-95 transition uppercase tracking-widest">ADICIONAR</button>
            </div>
        </div>
    </div>

    <div id="modal-checkout" class="hidden fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50 backdrop-blur-sm">
        <div class="bg-zinc-900 w-full max-w-sm rounded-3xl p-6 border border-zinc-800 shadow-2xl">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-black text-white italic">FINALIZAR <span class="text-red-600">PEDIDO</span></h2>
                <button onclick="document.getElementById('modal-checkout').classList.add('hidden')" class="text-zinc-500 hover:text-white font-bold">‚úï</button>
            </div>
            <div class="space-y-4">
                <input type="text" id="nome" class="w-full bg-zinc-950 border border-zinc-800 rounded-xl p-4 text-white focus:border-red-600 outline-none transition text-sm" placeholder="Seu Nome Completo">
                <select id="tipo-entrega" onchange="toggleEndereco()" class="w-full bg-zinc-950 border border-zinc-800 rounded-xl p-4 text-white outline-none text-sm">
                    <option value="entrega">üõµ Entrega (Delivery)</option>
                    <option value="retirada">üè™ Retirada no Balc√£o</option>
                </select>
                <textarea id="endereco" rows="2" class="w-full bg-zinc-950 border border-zinc-800 rounded-xl p-4 text-white focus:border-red-600 outline-none transition text-sm" placeholder="Endere√ßo com Bairro e Ponto de Refer√™ncia"></textarea>
                <input type="text" id="pagamento" class="w-full bg-zinc-950 border border-zinc-800 rounded-xl p-4 text-white focus:border-red-600 outline-none transition text-sm" placeholder="Forma de Pagamento (Pix, Cart√£o, Dinheiro...)">
                
                <button onclick="enviarPedido()" class="w-full btn-red text-white font-bold py-4 rounded-xl shadow-lg shadow-red-900/30 uppercase tracking-widest active:scale-95 transition mt-4">
                    Enviar para Cozinha
                </button>
            </div>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCXNjKn-uP2dpf_OG_pzUkqa-RnS-3V1L4",
            databaseURL: "https://km-burguer-default-rtdb.firebaseio.com",
            projectId: "km-burguer"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // CARD√ÅPIO COMPLETO DAS FOTOS
        const cardapio = [
            // Tradicionais
            { n: "X-Burguer", p: 19.90, c: "Hamburguer", d: "P√£o, hamb√∫rguer 90g, queijo, presunto, batata palha, milho e maionese da casa." },
            { n: "X-Salada", p: 22.90, c: "Hamburguer", d: "P√£o, hamb√∫rguer 90g, queijo, presunto, batata palha, alface, tomate, milho e maionese." },
            { n: "X-Bacon", p: 27.90, c: "Hamburguer", d: "P√£o, hamb√∫rguer 90g, queijo, presunto, muito bacon, batata palha, milho e maionese." },
            { n: "X-Calabresa", p: 24.90, c: "Hamburguer", d: "P√£o, hamb√∫rguer 90g, queijo, presunto, calabresa, batata palha, milho e maionese." },
            { n: "X-EGG", p: 24.90, c: "Hamburguer", d: "P√£o, hamb√∫rguer 90g, queijo, presunto, ovo, batata palha, milho e maionese." },
            { n: "X-Frango", p: 24.90, c: "Hamburguer", d: "P√£o, hamb√∫rguer, frango desfiado, queijo, presunto, batata palha, milho e maionese." },
            { n: "X-Tudo", p: 39.90, c: "Hamburguer", d: "O monstro! Hamb√∫rguer 90g, alface, tomate, queijo, ovo, presunto, bacon, calabresa, batata palha, milho e maionese." },
            // Artesanais
            { n: "KM Simples", p: 29.90, c: "Artesanal", d: "P√£o brioche, burger 100% carne bovina, queijo prato e maionese da casa." },
            { n: "KM Salada", p: 33.90, c: "Artesanal", d: "P√£o brioche, burger 100% carne, queijo prato, alface americana, tomate e maionese." },
            { n: "KM Bacon", p: 37.90, c: "Artesanal", d: "P√£o brioche, burger 100% carne, queijo cheddar, bacon crocante e maionese da casa." },
            { n: "KM Calabresa", p: 35.90, c: "Artesanal", d: "P√£o brioche, burger 100% carne, queijo cheddar, calabresa e maionese da casa." },
            { n: "KM MAX", p: 49.90, c: "Artesanal", d: "P√£o brioche, burger 100% carne, queijo cheddar, ovo, bacon, calabresa, alface, tomate e maionese." },
            { n: "KM Egg", p: 35.90, c: "Artesanal", d: "P√£o brioche, burger 100% carne, queijo cheddar, ovo e maionese da casa." },
            { n: "KM Chicken", p: 29.90, c: "Artesanal", d: "P√£o brioche, frango desfiado, queijo prato, batata palha e maionese da casa." },
            // Por√ß√µes
            { n: "Batata P", p: 16.90, c: "Por√ß√µes" }, { n: "Batata G", p: 26.90, c: "Por√ß√µes" },
            { n: "Batata Queijo/Bacon G", p: 43.90, c: "Por√ß√µes" },
            { n: "Calabresa c/ Fritas", p: 39.90, c: "Por√ß√µes", d: "500gr" },
            { n: "Contra Fil√© Grelhado", p: 59.90, c: "Por√ß√µes", d: "500gr" },
            { n: "Chapa Mix", p: 159.90, c: "Por√ß√µes", d: "Contra fil√©, frango, calabresa e fritas (400gr cada). Serve at√© 4 pessoas." },
            { n: "Frango Empanado", p: 49.90, c: "Por√ß√µes" },
            // Past√©is
            { n: "Pastel Carne", p: 12.90, c: "Past√©is" }, { n: "Pastel Queijo", p: 12.90, c: "Past√©is" },
            { n: "Pastel Pizza", p: 12.90, c: "Past√©is" }, { n: "Pastel Bauru", p: 12.90, c: "Past√©is" },
            { n: "Pastel Carne c/ Queijo", p: 13.90, c: "Past√©is" }, { n: "Pastel Frango c/ Catupiry", p: 13.90, c: "Past√©is" },
            { n: "Pastel Frango c/ Queijo", p: 13.90, c: "Past√©is" }, { n: "Pastel Calabresa c/ Queijo", p: 13.90, c: "Past√©is" },
            { n: "Pastel Nutella", p: 15.90, c: "Past√©is" }, { n: "Pastel Nutella c/ Banana", p: 15.90, c: "Past√©is" },
            { n: "Pastel Banana c/ Doce de Leite", p: 15.90, c: "Past√©is" },
            // A√ßa√≠ (Tamanhos)
            { n: "A√ßa√≠ Copo 300ml", p: 10.90, c: "A√ßa√≠", isAcai: true }, { n: "A√ßa√≠ Copo 400ml", p: 13.90, c: "A√ßa√≠", isAcai: true },
            { n: "A√ßa√≠ Copo 500ml", p: 20.90, c: "A√ßa√≠", isAcai: true }, { n: "A√ßa√≠ Tigela 500ml", p: 28.90, c: "A√ßa√≠", isAcai: true },
            // Bebidas
            { n: "Refri Lata", p: 7.90, c: "Bebidas" }, { n: "Suco Dell Vale Lata", p: 7.90, c: "Bebidas" },
            { n: "Refrigerante 600ml", p: 11.90, c: "Bebidas" }, { n: "√Ågua", p: 3.90, c: "Bebidas" },
            { n: "√Ågua c/ G√°s", p: 4.90, c: "Bebidas" }, { n: "Cerveja Lata", p: 7.90, c: "Bebidas" },
            { n: "Caipirinha", p: 23.90, c: "Bebidas" }
        ];

        const acaiExtras = [
            { n: "Banana", p: 1.00 }, { n: "Morango", p: 3.00 }, { n: "Leite em p√≥", p: 1.00 },
            { n: "Leite condensado", p: 1.00 }, { n: "Pa√ßoca", p: 2.00 }, { n: "Confete", p: 2.00 },
            { n: "Granola", p: 2.00 }, { n: "Nutella", p: 6.00 }
        ];

        let carrinho = []; let total = 0; let acaiAtual = null;

        function renderMenu() {
            const container = document.getElementById('menu-container');
            const nav = document.getElementById('nav-cats');
            const cats = [...new Set(cardapio.map(i => i.c))];
            
            nav.innerHTML = cats.map(c => `<a href="#${c.replace(/\s/g,'')}" class="hover:text-red-500 transition-colors">${c}</a>`).join('');
            
            container.innerHTML = cats.map(cat => `
                <section id="${cat.replace(/\s/g,'')}" class="pt-6">
                    <h2 class="text-xs font-black text-zinc-500 uppercase tracking-[0.2em] mb-4 flex items-center gap-2">
                        <span class="w-4 h-0.5 bg-red-600 rounded-full"></span>${cat}
                    </h2>
                    <div class="grid gap-3">
                        ${cardapio.filter(i => i.c === cat).map(i => `
                            <div class="card-item p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                <div class="flex-1 pr-4">
                                    <h3 class="font-black text-white text-sm mb-1 uppercase tracking-tight">${i.n}</h3>
                                    ${i.d ? `<p class="text-[11px] text-zinc-400 mb-2 leading-tight">${i.d}</p>` : ''}
                                    <span class="text-price font-black text-base">R$ ${i.p.toFixed(2)}</span>
                                </div>
                                <button onclick="${i.isAcai ? `abrirModalAcai('${i.n}', ${i.p})` : `add('${i.n}', ${i.p})`}" class="btn-red h-10 w-10 rounded-xl flex items-center justify-center font-black shadow-lg shadow-red-900/30 active:scale-95 transition text-lg pb-0.5">
                                    +
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </section>
            `).join('');
        }

        function add(n, p) {
            carrinho.push({n, p});
            atualizarCarrinho();
        }

        function atualizarCarrinho() {
            total = carrinho.reduce((sum, i) => sum + i.p, 0);
            document.getElementById('cart-total').innerText = `R$ ${total.toFixed(2)}`;
            const countBtn = document.getElementById('cart-count');
            countBtn.innerText = carrinho.length;
            countBtn.classList.add('scale-110'); setTimeout(() => countBtn.classList.remove('scale-110'), 150);
        }

        // L√ìGICA A√áA√ç
        function abrirModalAcai(nome, preco) {
            acaiAtual = { nomeBase: nome, precoBase: preco, adicionais: [], total: preco };
            document.getElementById('acai-titulo').innerText = nome;
            document.getElementById('lista-adicionais').innerHTML = acaiExtras.map(ex => `
                <label class="flex justify-between items-center bg-zinc-950 p-3 rounded-xl border border-zinc-800 cursor-pointer hover:border-red-900 transition-colors">
                    <div class="flex items-center gap-3"><input type="checkbox" onchange="toggleExtra('${ex.n}', ${ex.p})" class="w-5 h-5 rounded accent-red-600 bg-zinc-800 border-zinc-700"><span class="text-sm text-zinc-300 font-bold">${ex.n}</span></div>
                    <span class="text-xs font-black text-red-500">+ R$ ${ex.p.toFixed(2)}</span>
                </label>`).join('');
            atualizarTotalAcai();
            document.getElementById('modal-acai').classList.remove('hidden');
        }
        function toggleExtra(n, p) {
            const idx = acaiAtual.adicionais.indexOf(n);
            if(idx > -1) { acaiAtual.adicionais.splice(idx, 1); acaiAtual.total -= p; } else { acaiAtual.adicionais.push(n); acaiAtual.total += p; }
            atualizarTotalAcai();
        }
        function atualizarTotalAcai() { document.getElementById('acai-total-modal').innerText = `R$ ${acaiAtual.total.toFixed(2)}`; }
        function confirmarAcai() {
            let final = acaiAtual.nomeBase; if(acaiAtual.adicionais.length > 0) final += ` (+ ${acaiAtual.adicionais.join(', ')})`;
            add(final, acaiAtual.total); fecharModalAcai();
        }
        function fecharModalAcai() { document.getElementById('modal-acai').classList.add('hidden'); }

        // CHECKOUT
        function abrirCheckout() {
            if(carrinho.length === 0) return alert("Seu carrinho est√° vazio!");
            document.getElementById('modal-checkout').classList.remove('hidden');
        }
        function toggleEndereco() {
            const tipo = document.getElementById('tipo-entrega').value;
            document.getElementById('endereco').style.display = tipo === 'retirada' ? 'none' : 'block';
        }
        function enviarPedido() {
            const nome = document.getElementById('nome').value;
            const tipo = document.getElementById('tipo-entrega').value;
            const end = document.getElementById('endereco').value;
            const pag = document.getElementById('pagamento').value;
            if(!nome || (tipo === 'entrega' && !end) || !pag) return alert("Preencha todos os campos!");
            
            db.ref('pedidos').push().set({
                cliente: nome, endereco: tipo === 'entrega' ? end : 'RETIRADA NO BALC√ÉO',
                pagamento: pag, itens: carrinho.map(i => i.n).join(', '), total: total,
                status: 'novos', hora: new Date().toLocaleTimeString('pt-BR').slice(0,5),
                data: new Date().toISOString().split('T')[0]
            }).then(() => { alert("PEDIDO ENVIADO! üçî\nAguarde a confirma√ß√£o."); window.location.reload(); });
        }
        window.onload = renderMenu;
    </script>
</body>
</html>
